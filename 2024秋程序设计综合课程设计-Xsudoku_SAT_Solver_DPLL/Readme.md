

# 运行方式：

**[main_gui.exe](./main_gui.exe)和[raylib.dll](./raylib.dll)置于同一目录下，双击exe运行。**

---



# 操作说明：

左键点击展开轮盘

**右键**选择数字

`右键`选择数字

*右键*选择数字

> 右键😠选择数字


### **1. 上方四个按钮**分别是：

* NEW：新游戏
* SOLVE：DPLL算法解算填充数独。需要注意的是，解算是按照当前实时的数独计算的，也就是说，如果手动填充了部分，可能会导致UNSAT

* ANSWER：挖洞法的答案
* RESET：恢复

### 2. 下方

* SAT SOLVER：实现了drag-drop，将cnf文件拖拽到框内即可解算（复杂cnf会无响应，需要手动强行关闭）
* SAT 1ms：即SAT/UNSAT两种结果，并显示解算时长。


![img](./src/使用说明.png)


以下是对算法实现的详细说明：

---

# 算法实现说明

## 1. 问题描述

数独问题是一种经典的约束满足问题（CSP），目标是将一个 9x9 的网格填充数字，使得每行、每列和每个 3x3 的子网格中的数字均为 1 到 9，且不重复。

本项目通过将数独问题转化为布尔可满足性问题（SAT），并使用 DPLL（Davis-Putnam-Logemann-Loveland）算法求解。

---

## 2. 算法流程

### 2.1 数独转化为 SAT

1. **变量编码** :
   使用三维布尔变量 `X_{i,j,k}` 表示数独网格中的每个单元格：

* `i` 表示行号（1 到 9）
* `j` 表示列号（1 到 9）
* `k` 表示数字（1 到 9）
* `X_{i,j,k} = true` 表示单元格 `(i, j)` 填入数字 `k`

1. **约束条件** :
   将数独规则转化为布尔公式：

* **单元格唯一性** : 每个单元格只能填入一个数字。
* **行唯一性** : 每行的每个数字只能出现一次。
* **列唯一性** : 每列的每个数字只能出现一次。
* **子网格唯一性** : 每个 3x3 子网格的每个数字只能出现一次。
* **初始条件** : 根据输入的数独题目，添加固定的单元格值。

1. **生成 CNF（合取范式）** :
   将上述约束条件转化为 CNF 公式，供 SAT 求解器使用。

---

### 2.2 DPLL 算法

DPLL 是一种递归回溯算法，用于判断布尔公式是否可满足。其核心步骤如下：

1. **单子句传播（Unit Propagation）** :
   如果公式中存在单子句（仅包含一个文字的子句），则该文字必须为真。将其赋值并简化公式。
2. **纯文字消除（Pure Literal Elimination）** :
   如果某个文字在公式中仅以一种极性（正或负）出现，则可以直接赋值为真。
3. **分支（Decision Making）** :
   从未赋值的变量中选择一个进行赋值，递归求解。
4. **回溯（Backtracking）** :
   如果某个分支导致公式不可满足，则回溯并尝试其他赋值。
5. **终止条件** :

* 如果公式为空（所有子句均为真），则公式可满足。
* 如果公式包含空子句（无文字的子句），则公式不可满足。

---

## 3. 数据结构

### 3.1 栈（`myIntStack.h`）

* 用于存储变量赋值的历史记录，支持回溯操作。
* 提供以下操作：
  * `push`：将元素压入栈。
  * `pop`：弹出栈顶元素。
  * `top`：获取栈顶元素。

### 3.2 动态数组（`myIntVector.h`）

* 用于存储布尔公式中的子句和文字。
* 提供动态扩展功能，支持高效的插入和删除操作。

---

## 4. 代码实现

### 4.1 CNF 生成（`Sudoku.h`）

* 定义数独转化为布尔公式的规则。
* 实现约束条件的编码和 CNF 文件的生成。

### 4.2 DPLL 求解（`final.cpp`）

* 实现 DPLL 算法的核心逻辑，包括单子句传播、纯文字消除、分支和回溯。
* 使用栈和动态数组优化算法性能。

---

![1756003804415](image/Readme/1756003804415.png)

# 工程源码说明文档

## 项目概述

本项目是一个基于 DPLL 算法的 SAT 求解器，用于解决数独问题。项目包含一个图形用户界面（GUI）和核心算法实现，旨在通过 SAT 求解器高效地解决数独问题。

---

## 文件结构

### 根目录

* **main_gui.exe**
  项目的可执行文件，提供图形用户界面。
* **raylib.dll**
  GUI 所依赖的动态链接库。
* **Readme.md**
  项目的简要说明文档。

### src 文件夹

* **final.cpp**
  项目的主要程序入口，包含核心逻辑。
* **Global.h**
  全局变量和常量的定义文件。
* **main_gui.c**
  图形用户界面的实现文件，基于 `raylib` 库。
* **myIntStack.h**
  自定义的整数栈数据结构，用于算法实现。
* **myIntVector.h**
  自定义的整数向量数据结构，用于存储动态数组。
* **Sudoku.h**
  数独问题的相关定义和操作函数。

---

## 核心功能模块

### 1. 数独求解模块

* **功能描述** :
  使用 SAT 求解器将数独问题转化为布尔可满足性问题，并通过 DPLL 算法求解。
* **主要文件** :
* `final.cpp`
* `Sudoku.h`
* `myIntStack.h`
* `myIntVector.h`

### 2. 图形用户界面模块

* **功能描述** :
  提供用户友好的界面，支持数独问题的输入、求解和结果展示。
* **主要文件** :
* `main_gui.c`
* `raylib.dll`

### 3. 数据结构模块

* **功能描述** :
  提供自定义的栈和动态数组数据结构，支持算法高效运行。
* **主要文件** :
* `myIntStack.h`
* `myIntVector.h`

---

## 编译与运行

### 编译

1. 确保安装了支持 C++ 的编译器（如 GCC 或 MSVC）。
2. 将 raylib.dll 放置在编译器可访问的路径中。
3. 使用以下命令编译（以 GCC 为例）：

   `g++ -o main_gui.exe src/final.cpp src/main_gui.c -lraylib`

### 运行

1. 双击 main_gui.exe 或在终端中运行：
2. 按照界面提示输入数独问题，点击求解按钮查看结果。

---

## 注意事项

1. **依赖库** :
   GUI 模块依赖 `raylib` 库，请确保 raylib.dll 文件完整。
2. **输入格式** :
   数独问题需按照标准格式输入，确保每行 9 个数字，空格分隔。
3. **兼容性** :
   本项目在 Windows 系统上开发和测试，其他平台可能需要额外配置。
